# Hello Context Hub
========================

The hello world sample app that introduces you to ContextHub

## Purpose

Today's world is full of devices and sensors just waiting to be tapped into. Meaningful events happen all the time, when we get home from work, approach an interesting painting, or visit our favorite coffee shop. ContextHub takes those meaningful events in our lives and transforms them into powerful triggers your apps can respond to turn apps into experiences for your end users. 

In this sample application, we use ContextHub introduce the relationship between devices triggering events on the server by setting up geofences on a map. 

## ContextHub

ContextHub takes care of setting up and monitoring geofences to generate events to server can listen and respond to.

## Getting Started

1. Get started by either forking or cloning the Hello ContextHub repo. Visit [GitHub Help](https://help.github.com/articles/fork-a-repo) if you need help.
2. Go to [ContextHub](http://app.contexthub.com) and find the app id associated with the "Hello World" app. Its format looks something like this: `13e7e6b4-9f33-4e97-b11c-79ed1470fc1d`.
3. Open up your Xcode project and put the app id into the `[ContextHub registerWithAppId:]` method call.
4. Build and run the project in the simulator.

## Xcode Console
1. This sample demo will log events into the debug console to get an idea of the JSON structure posted to ContextHub. Use shortcut `Shift-Command-Y` if your console is not already visible.
2. When the app is launched, it should generate a "location_changed" event in the console which you can look at. You are able to access information about the event like device name, device ID, latitude, longitude, and speed.
3. Within the application delegate are 4 methods defined by the `CCHContextEventManagerDelegate` and `CCHContextEventManagerDataSource` which allow you hook into the event pipeline of events generated by ContextHub. you can get notified when an event will post and has been posted, as well as control if an event should be posted and add extra paylod data to an event. These 4 methods allow a lot of flexibility in controlling what events get sent to the server for additional processing.
4. Check out the ContextHub [documentation](http://docs.contexthub.com/#dictionary-samples) for more information about the event pipeline and what you can do with it. 

    
## ContextHub.com

1. The real power of ContextHub comes from collecting and reacting to events posted from devices onto the server. Go back to the [developer portal](http://app.contexthub.com) and click on your app "Hello World" to access its data.
2. You are then brought to the "Contexts" page which controls how the ContextHub server responds to events generated from devices. To the left you'll see "Contexts", which are rules which allow actions to be triggered depending on event data. To the right, you'll see your latest events triggered by devices with your app installed.


## Context Rules

Context rules let you change how the server will respond to events triggered by devices. Let's go ahead and create a new rule that will save some data on the server in the vault.


## Creating a New Rule

1. In the "Contexts" tab, click the "NEW CONTEXT" button to start making a new rule.
2. Enter a name for this context
1. create a geofence_in context on the server
1. tap the Create Geofence button
1. check out the geofences on the server
1. simulate a location change
1. go back to previous location
1. you have a new event, no code needed :)


## Use the vault object in the context rule

1. edit the location_changed context
1. notice that you have a few objects that you can use inside the rule
1. add vault.create("sampe-event", event)
1. launch the application
1. click on the vault tab
1. now you see that all of your locatin_changed events are being persisted in the vault in a container.


Trouble with the simulator
- make sure you have a location set in the simulator  debug--> location
- use the custom location to test fence in and out
- use freeway drive to test locaiton change
